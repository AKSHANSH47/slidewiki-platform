language: node_js
node_js: 6
sudo: required
git:
  depth: 5
branches:
  only:
  - "/^(?i:SWIK)-.*$/"
  - master
cache:
  directories:
  - "./node_modules"
  - "./bower_components"
before_install:
- if [ "$TRAVIS_BRANCH" == "master" ] || [ "$TRAVIS_BRANCH" == "release" ] && [ "$TRAVIS_PULL_REQUEST" = "false" ] ; then ./travis/install_compose.sh ; fi
before_script:
- bower install
script:
- npm run lint
- npm run test
after_success:
- if [ "$TRAVIS_BRANCH" == "master" ] || [ "$TRAVIS_BRANCH" == "release" ] && [ "$TRAVIS_PULL_REQUEST" = "false" ] ; then ./travis/dockerhub.sh $TRAVIS_BRANCH && ./travis/deploy.sh $TRAVIS_BRANCH ; fi
after_script:
- rm .env
- rm -f deployment_keys.tar
- rm -f ~/.docker/{cert.pem,key.pem,ca.pem,config.json}
services:
- docker
notifications:
  slack:
    on_success: change
    on_failure: always
    rooms:
      secure: eWFXrLDA5plQ6MNK0f0ojllPf6MPO6qUzE+fIpRYCQfgYLrO47xYF9f9QBRrwK9kuNKnQ57muagw1+tmPLV2yq7QuP+/8CDtodz8h+GhR0wyh7wjdGbe/O6G8ND5pOXSp8eRaW7UmC63q1dvx+j6YEEIpcNwMiX93CS2LCgVr3sBPSfJcZdsCEZc9UO/+jCvBNiqklJb6fozkzIrYJdOMMyrqHzjzoUcuIrdRcyDHQHtwOfJjj6sgOZ/AP+ur/h+f00FJ4czSKZb/l/mboKUe9oWfNYj++QJWM+MNRHN2O2aH8KB4bVc01U6HLp9ErSoxcpIWjgQ62GszQKcE7OgaIek5vw3oNRaDUSdgDF2ue0sYQO2lqB3Wl4wjsV3pLMLnnDa0e/9NV7N4GZzhhLfAPViLfp9DfG4SRnBMJI+nTdTfJRhYWM5dq2W0LwzVGAT5F/ewbu2lzF1Djq5A4D3Oa1OmV6fwtuSq5xQgVO8hD45nw0cwzNukFH/52cEj/hkz2RDlNTiC1RBzEYxLMuLEW+vNxt7KOmEqS5O8canCA1Zaq3zPtxV2zA0FVVtlMe+kXFE/Eng7FvU2JmyxxK7lRny4q7VhxauSsA6QxCZzt6qUb2WhBxvBeDNEyC9ZT1kn6TlD1Ja7F3+r0UPlQA0d1ky9SPVSNM9sF7awgrHhQs=
env:
  global:
  - DOCKER_COMPOSE_VERSION=1.6.2
  - secure: nvz1KIxuHshgzALcPddKGvagNCkA4HxJSE3U7biqSW4m5X5QsUEwgwW9AACobeC18peuEi1bJNuhd3e0Zbi+Yf/nQXd7rE7slPtjhTlU+Uhky91xP24N5o3iIBVyFynOsKYQ9XmxA7Qo4w2dH3JBvF9pcbDsP+nt75sin2G5UztTDr3+8nEybiag2P+WRC5WO6vVWVs9QCZDnl/yyUlSYUWOw41kCQtL/GbK6ojP8+pz6nL0192Kqa3h0pIbNuQJZTUeyfDXmpPn9TO4fwdecYZ+fHztUAjqN54nkarOpI8nJfkGWbGfuQa5qcLnCNHdpqmkSIQDAsDtgX05gBm0RX/77l/PqHWFBSoBZ/dRje7DO2GdoRV86G4Mr7H9HvRGOV4Ds8Awui43YwL9GRT5SKyW9DhfzW+Ijo7dy4ee5lIfI9sqQO2Uvw19VIkh0EMaKCxIRwDUT5+JhCqVr/vNVygYAfS3VnVQlGQ7C/OWWWafGph0cB2tbnNdr+5TcZCQlaYk5lJlmVymap6ZXujYGJiyAY8EKr6HieGPcEEjfx5xnJMleG0sPP33HCj5NhLddCQiWD0nID3jXwjfPLDzggJGEYaozK15HTXEkS2lYdeq96tZ5/GjxioJMEF4u0Cf1HvVOlloqrQUHuFPu8D97HqnfU48W9QQw6V3xiQENKc=
  - secure: O0V4EbqP2pZnUv3tcxgad8nkFI4VlZjM9IT/xv5tykSnSlADv0y5w5y8Ye5Uekr8Afy2u50+zw0eIjoPFMMQ0MJ7PO1ExcZoh1RPNlMm4+S10rIAy3KeDofkbtBEAgiMJ7ICn8mmdOKcB4HbwrvK1AS7HqhV6GCrLqCF1U4zSU9zabdnLs/vkF4GK/JjlkudW3hwzfpe8hobFeeWkwiR4Ze6Sc1I8HP4UhADWv5zs7UjyW6Z7u+ZFerMv4RpZos0k+mjU9I+kIu3nynfuYBbcq+yLIutdb58uuL7Tg4IJVH9NiKV7TIya5KL4aD562KWoPB7p52PeuENU4zIgQh5yRC8rpC33vvg7eDy0JGcj8PAd/TT5YKPf7AoHX6BKKoDQY/EnkZYHl7supX3+YWQeM9aMHyMOATleSWjCilomGG788VpRD67l7lcNd8zksmf1TeRZTVEzKOILojTm+0yCIrs0oBDFBtJyULtddSobSJS9Ow1k1ih9szKP6q1RhWp97jUdIsklWMJH8iyTiwoBTkPoC4vPS5oK+HeW2n9yHbOc9Rl99LxNhcvTLZgQ1LVbDA6SzdFiKnkWGW2geO+Z9VSAO3nTy726+M8pCXnDgQrFNl4Tt66CfpZHnlYZ/fvNoeVniBv6XIg6HvEN3wv+uBSZR79EFsH8DDCtFETcNo=
  - secure: Bau5rJYLSC697fnyaSQg7zIlmoyncpLRNDGqjUpFN7dpn5t4L25cqaEVcgG4roNW1Rrpr+PRm+5VnIxxEjmqC23rJmvOUVJk2HJGnpnkNcR11UDDpghixe0hoHGcTaYN3aG7OD6F9GWGvI8uS0aq46sDSFLinBjKYW41qIgoM0FANE91BAIu7yDn6ugaHGNmg8Z/0vnSLJvlir1zSdNOWekNCaL4uzmeycAp7GxobYfQghi0Ka3a6cTUHDXaC+j69xTOhuvwdekB6MCmL9tBNmSi0Vw2zVIVmgt4tOu8ExDpU9Y6O0YTBSryiQIrQtSMBHaRwNY+xqLpupAu2qs9OF6werQz9Ik4RxEojKvinMX5Vrvzkn+nY7DKTrR5BBCNLI2GGMu2uZjgn9z9r8SlNqkgqnqj/hQHkml4mzgv96RmXvhq0pVydv5WsY2yT6I2opMdfKSXlz8fzoh7FQO8Uzi4LvwtbHwKBIGzs9psEdJSTk+jt2vSQtNzvyqxRf2u6VNTj5Ul+ljtR9fqwlvu0OZdK6OIgCMm36/DtIxS/QSD+ComXcjXJqTqjzmRODm07aUQBFAXnNwF61DGx+MKD9AEl38xiFq0MT+NMJ0NBqyS+WiNbky7hnUiNFIBVKxRX22P+C7/ivhGGhZHVvM9/1k3U9+dNm6ufOdHPNHnbWQ=
  - secure: WdaHRyep+xqrdUPRtcGyTZKHyoXTZyJFp8DZw3dKmJ6wnZ/dh0hOQzNbmin4rsXIEnopmisy2GvrDKiwaWK0c0Gie9RLk7ozehFpRF8Qr8OXWsJdTEF4lWbZ+gSXlXK+J/a1ojsVYZes8g7+7hlwiw+m8g3XYN81HaOui25eDFOgS+u/cKZhewUoI1Ys9njnj/dJz6gTWhK8RZHBxFlsAsy7jllazR3f5++5JNIvhsf1eOzyCZ+x9l4u4Mx6hrpZ9z5ZEU7gGTY4fHDT/yDRU+H4aCUbuT7n6RDScPF8QOoWZC1FtX3/cbshO/0EZvaec0ZLdsKvzlmGDe8Ue5Dj3cEmEpcm5xE7B5U4R6Dsn293J0yXNvv7AfnlGwR8hengbBZ5W/KKHA4yqsSApA0N41kk2WdqQmQMKpsZOah9Q8KLpgNc1z9FHK9tHFs+NaGIv51nDRSyzrq//TohU1d302j4GPAXUAlOB4P4KWNntlH8+tOUN2bHOyYTck41DibTgwdSXRH4Np9EgEjbsOGorXuuwUIyObXWJcJvBHOVMFe76SQ/3O+f+BraBWUsMg0V2y/ysjIVulPXM+asZa8JqCw1CnudJBedw1ADbfAZPp4Ktg36kYCL9NMUS/lLPERPOdK1ygYpvP12Ga+UHk/c+NDVZMntehbae+7ZN6tYwik=
  - secure: ClYcOxQTwnyVVBt0q6n+h/rqEhv2U2D/37LMwLZ8YV4B1ye2Mi45SCf+n4PVxkrUigOSHAQQ+Gqybd2SNS693ydhngwV8RcsARTuYgKA+//w5+ontOEe8z+mN1o0eoRiWwQCYNRrh++z4th0yGfV0gKwz5vaNnJMlzlO/leBc2JQoaV7q0LLv1lUpdIGj2B/T7NhF1EEY3b/cCvWLRrv09+cdortYPFmocTokJ87hLBXwh4QAXGCBkD9x6Y4sBHNenYXQF/oVTq1OZYXpRaTHykERD/8eMCZ/QEz7uvcWy4wu5rRuJHtCa+Cb3uBm8M3MUmMnXmoATrDqRQQWU5/7Eg0967GWypdUnJXTPeX0cAGEdXqoF6zyRt/qwzswiLErjCk0TpLQsA+NXaO1g8qTO+U1NKAO595E4HzdL3VFasu28PPjCNj78C39NslL33mFFUh1X2atHNxW/7SXw6ANKNw9ccPOdIfjlDsxCig8QEdAw/gMModo+RQNeGbtg32xHEtO9Gq6q+i0b6GKhai1myqapJXXXvqsrzdg5krVg+J5B5x+kA6O4Rx+EKRw+QpWMVoOAEPRCJ5VMUzMXUvuLv5qUfmlIJOks2w2mwudYdN2KzZpBGwcMHPe9rjvdEQBQXFY4qA4nfiu+f4F0osVHx+iw/P+5KWKKcbGOlvYXc=
  - secure: KMcAALshRsLXSJ4Sf9hdMnAerknHGspMtaY/tXqE/V7Ywa1UmJEguFC395eBlwyCK8Zd7bj+qUykxH29M0JtAdTtEz7Sqfv2nFGgMHtSElRC28o8EECASoEEmGVXivo0Hv8W1caT+6bQdWgubR50uYT0k/V2ebT2oPCJoBwLHbdNUekHEIM5C+q4zbP8oXEpZReVgV2XjavcbIa6ttawBYLZXFGNVOM2XVIQLwMwkOHIxGrzDBUcxzn8kDUq53L01Hg3AOg7ZAQ2ADyBBp4STtENmDvgdvHnbJQHp1uLUyoUM4MvgmKduR6Z9ZTP7a9+Bd/rOiLsg/OIHKCapYpeUTmyEmhAnRAH54f6af4KKEk8XM7H3V6k2jZswyJ/pf05pD4CC1/cFi3lNNUzeElpOLHRxBruUI+CD9/QKbdG+3MA20rjzMDq2cx24vgZ5hT+E0bZzc2aDqAxKnBVHvpVKAOECg/k6Vrdli9d+HIz+kB/Vu4sjf+nNtyWRMJyi7L87xN7B7fUvKe/vvSTGg5w8HX9houhFtw27hjb9z3+BY9wPQD/vl+UAVbz6xNEuOATvzuuQE1rVQK/hh4SJBn6wj7+toTGFFMiYIOk+UCmTJ+OEuMjGimztp70OUg1ZZw1zqmpKxH7hd8hsE7z7FWtDWI6u+Q/8EM8oyJiyhsxr1o=
  - secure: kJjlUmMWYGGO8hhzkXBZxjjrn6o2ptj+0x0IVbnZ0wqDApeA+v8MjpH/ofBvkVfwxYukA/WOQ/xZ6KJ95qH/op2ealqYAjbta9V0LxEOqzPOVhj8UqHAjrq0U5h9EaiPbt/0hVudnZMBnkBkIsZtMk4vW0ITsgFybWGthCbPyGoRoQMcFsxC2+ZjaXvhPWbhcWr0M+E9pEpr0DFWWu0jqE6ex/jTaHqcApga9uDBKMZxFFMt8papRiOCH14kmcTkiskaG475c4GpL+E2ZcTyijI3QYYBZ+MSayi+gg8N3MJjQelC79nVaIcBxFKtRCWIpOJe62NI2KpdSUWx0kbHlJm0C/s6kspcBoXrg/yAq1U1WIiPQ+OjiXUNM0puF5DjbUHa1e+iVbUI0koDkSfgTpymiWOOCmVPxw+tR89TRSo2TIDiyxywARLsTeun4TyrHSCq62ZmA+akl50deZ/yazxbg78TtDgwhH8AKhTQAxNqjLaQP48IIhUNj7qICT2dW+q8ASlxhMDao44ADFgGCj00Qu/JlFgUad0gcrPqhGg98wnftQ7onHmR+o6O9mtlPbZuHGKNYnyfwjnkntLSLgNKhUNjPHkL6JFRE1wpnja21qwjSbDcKCunAT3WrAd2V3VJirvYXEQGI6ViyTJ5wuJwrbQJITuB+Xw4tXMQrmg=
  - secure: F5iykd830cEGkDBRA/2PEV0GBfdKAERc+jff/jUi+9EVF85z1FgCyZh/e2iZrqov7yx7r05MM6kUQqJhN3ja7ENjIKVo1TEdLFWE8+MRDN8T+7R96T5YQp0huRlh+8m3KK7ee3LTTXJ3cWVL7XXnbQmQDmjAtM3GHphoGLf9s30Jo7SRwlk+Q5Zx4AzWdpiugms/YclbSl5yLSnsCL1GuZziBRDkDaXoPKImJZBSL2jeXNDzgCuqE+x73M7Gdc8SMtN97s4R+byQTSG4bMajPi8veUGvQOsblbpI6FXDqdYZuTwA89PKiTS4//AK+DrXwXiHydzGxonNXLdB9NC7wpd1XXlL/gcjwGQ57nT8Azmtp1n2XCFo5/17fHnvcs5glIpXIP/I5FtMz8BiJKSUsvjDmmUdi7E6WKfTHrDfCk3twoZ+Lukv981eNcANRPS467OyHANs2RdJi+T2g2bSNDfsXP2AnJy+BgJnZDOI1n4kx/onh6upjo9E7fV7Bt1fiTs7T5xIYgOL/KBbsrqy/jRDpHVhuDwiQuDVNpIpiiqo14oKpVTyCczd+tYRSlRq50Mzx+WpffmMl+nblq3ws/+Cc3zplVxOv3sWfIJlwcKk3kwgQTKXcQHwe87L2ty0BI1qOTU2o+3UhUjEqoqceDJUzZoe89XOJP+P96e1o44=
